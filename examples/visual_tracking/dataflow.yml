nodes:
  # Use an existing video file
  - id: video_source
    custom:
      source: opencv-video-capture
      inputs:
        tick: dora/timer/millis/500  # Slow rate for easier visualization
      config:
        CAPTURE_PATH:  "./test_video.mp4"
        IMAGE_WIDTH: 640
        IMAGE_HEIGHT: 480
      outputs:
        - image
  
  # Generate a fixed bounding box for testing
  - id: fixed_boxes
    path: "./fixed_box_generator.py"
    inputs:
      image: video_source/image
    outputs:
      - boxes2d
  
  # SAMURAI node
  - id: samurai
    custom:
      source: dora-samurai
      inputs:
        image: video_source/image
        boxes2d: fixed_boxes/boxes2d
      outputs:
        - masks
  
  # Visualize the results (single node for visualization and display)
  - id: display
    custom:
      source: opencv-plot
      inputs:
        image: video_source/image
        masks: samurai/masks
      config:
        WINDOW_NAME: "SAMURAI Tracking"